.TH urpmq 8 "28 Aug 2002" "MandrakeSoft" "Mandrake Linux"
.IX urpmq
.SH NAME
urpmq \- urpmi database query tool.
.SH SYNOPSIS
.B urpmq [\fIoptions\fP] [\fIpackage_names\fP | \fIrpm_files...\fP]
.SH DESCRIPTION
urpmq allows querying the urpmi database. It is for you if want to list
available packages in the various media of urpmi, or list dependancies of
packages or packages that will be installed if you start urpmi.
.PP
Output format of urpmq is the following according to command line options:
.IP
[group/]package_name[-version][-release][.arch]
.SH OPTIONS
.IP "\fB\--help\fP"
Print an help message and exit (this is the same as \fB-h\fP or \fB-?\fP).
.IP "\fB\--update\fP"
Use only update media. This means \fBurpmi\fP will search and resolve
dependencies only in media marked as update.
.IP "\fB\--media\fP \fImedium1,...,mediumN\fP"
Select specific media to use instead of all media available (or update media is
\fB--update\fP is used).
.IP "\fB\--excludemedia\fP \fImedium1,...,mediumN\fP"
Do not use the given media.
.IP "\fB\--sortmedia\fP \fImedium1,...,mediumN\fP"
Sort the given media, substrings may be used to simplify grouping.
.IP "\fB\--synthesis\fP \fIfile\fP"
Use the given synthesis\fIfile\fP instead of urpmi db for searching packages and
resolving dependencies.
.IP "\fB\--auto-select\fP"
Automatically select all packages that have to be upgraded according to already
installed packages and packages listed in various media registered.
.IP "\fB\--fuzzy\fP"
Disable fast search on exact package name, ie it will propose all
package containing the name even if one has the given name (this is the same
as \fB\-y\fP).
.IP "\fB\--keep\fP"
Change selection of package when some dependencies cannot be satisfied by trying
to keep existing package instead of removing them. This behaviour generally
rejects upgrade of packages given on command line (or when using --auto-select).
.IP "\fB\--list\fP"
List available packages.
.IP "\fB\--list-media\fP"
List available media.
.IP "\fB\--list-nodes\fP"
List available nodes when using \fB--parallel\fP.
.IP "\fB\--list-aliases\fP"
List available parallel aliases.
.IP "\fB\--src\fP \fIname\fP"
Search a source package according to \fIname\fP and it will select all dependencies by
default, unless \fB\--install-src\fP is used in order to install source package
itself.
.IP "\fB\--headers\fP"
Extract headers for package selected to standard output.
.IP "\fB\--sources\fP"
Print source url (or file) of all packages selected.
.IP "\fB\--force\fP"
Ignore error of inexistant packages requested.
.IP "\fB\--parallel\fP \fIalias\fP"
Activate distributed execution of urpmi to other machines (it is mandatory that
urpmi is installed but it is not necessary to have media defined on any
machines). \fIalias\fP defines which extension module to use by urpmi (currently
\fBurpmi-parallel-ka-run\fP or \fBurpmi-parallel-ssh\fP) and which machines
should be updated, this alias is defined in the file /etc/urpmi/parallel.cfg as
described below.
.IP "\fB\--root\fP \fIdirectory\fP"
Use the file system tree rooted for rpm install. All operations and scripts
will run after chroot(2). The rpm database in the rooted tree will be used but
urpmi configuration comes from normal system.
.IP "\fB\--wget\fP"
Use wget only for downloading distant files. By default curl is used if
available or wget instead.
.IP "\fB\--curl\fP"
Use curl only for downloading distant files. By default curl is used if
available or wget instead.
.IP "\fB\--proxy\fP \fIproxyhost[:port|1080]\fP"
Use specified HTTP proxy.
.IP "\fB\--proxy-user\fP \fIuser:password\fP"
Use specified user and password to use for proxy authentication.
.IP "\fB\--env\fP \fIdirectory\fP"
Use a different environment directly from a bug report to replay a bug, the
argument is the same argument given to \fB--bug\fP option.
.IP "\fB\-v\fP"
Activate verbose mode.
.IP "\fB\-d\fP"
Select dependancies (maximal closure).
.IP "\fB\-u\fP"
Deselect packages if a better version is already installed, this option can be
used with \fB-d\fP to simulate \fB-M\fP mode of \fBurpmi\fP.
.IP "\fB\-a\fP"
Select all matches on command line, useful when using \fB-f\fP or \fB-r\fP with
incomplete name given.
.IP "\fB\-c\fP"
If maximal closure is used, assume that a package listed may have wrong or not
up-to-date dependancies. This cause more package to be upgraded and may correct
unresolved dependancies on the rpm database.
.IP "\fB\-P\fP"
Do not search in provides to find package (this is the opposite of \fB-p\fP and
is the default).
.IP "\fB\-R\fP"
Reverse search to what requires the package given.
.IP "\fB\-y\fP"
This is the same as \fB--fuzzy\fP.
.IP "\fB\-s\fP"
This is the same as \fB--src\fP.
.IP "\fB\-i\fP"
Print useful information in human readable form as for \fIrpm -qi\fP.
.IP "\fB\-g\fP"
Print group of each packages listed.
.IP "\fB\-r\fP"
Print version and release of each packages listed.
.IP "\fB\-f\fP"
Print version, release and arch of each packages listed.
.SH FILES
.de FN
\fI\|\\$1\|\fP
..
.TP
.FN /usr/bin/urpmq
The \fBurpmq\fP executable (perl script)
.TP
.FN /var/lib/urpmi/list.*
Contains the list of all packages known by urpmi and their location only
if a password is used to access distant location (using network protocol) or
various directory are used to store packages.
.TP
.FN /var/lib/urpmi/hdlist.*
Contains information about all known packages, it's a summary of rpm headers.
If an hdlist file is used for a medium \fBurpmf\fP can operate completely which
is almost always the case (please refer to \fBurpmf\fP man page for more
informations on this topic).
.TP
.FN /var/lib/urpmi/synthesis.hdlist.*
Contains synthesis information about all known packages built from hdlist files
that can be used by minimal closure algorithm. If these files are not present
hdlist files will be used instead but this is much slower.
.TP
.FN /etc/urpmi/urpmi.cfg
Contains media description, previous format from older urpmi is still accepted.
.TP
.FN /etc/urpmi/parallel.cfg
Contains parallel alias description, format is
\fB<alias>:<interface[(media)]>:<interface_parameter>\fP where \fB<alias>\fP is
a symbolic name, \fB<interface>\fP can be \fBka-run\fP or \fBssh\fP,
\fB<media>\fP is a media list (as \fB--media\fP parameter),
\fB<interface_parameter>\fP is a specific interface parameter list like "-c ssh
-m node1 -m node2" for \fBka-run\fP extension or "node1:node2" for \fBssh\fP
extension.
.TP
.FN /etc/urpmi/skip.list
Contains package expressions that should not be automatically updated. The
format is a list of provide of package (or regular expression if bounded by
slashes \fB/\fP) with optional operator and version string, or regular
expression to match the fullname of packages too.
.TP
.FN /etc/urpmi/inst.list
Contains package names that should be installed instead of updated.
.SH SEE ALSO
\fIurpmi.addmedia\fP(8),
\fIurpmi.update\fP(8),
\fIurpmi.removemedia\fP(8),
\fIurpmf\fP(8),
\fIurpmi\fP(8),
.SH AUTHOR
Pascal Rigaux, Mandrakesoft <pixel@mandrakesoft.com> (original author)
.PP
Francois Pons, Mandrakesoft <fpons@mandrakesoft.com> (current author)
